{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "type": "object",
  "additionalProperties": false,
  "required": [
    "event_id",
    "user_id", 
    "event_timestamp",
    "event_type"
  ],
  "properties": {
    "event_id": {
      "type": "string",
      "pattern": "^(EVT-[0-9]{13}-[A-F0-9]{8}|[A-Fa-f0-9]{8}-[A-Fa-f0-9]{4}-[A-Fa-f0-9]{4}-[A-Fa-f0-9]{4}-[A-Fa-f0-9]{12})$",
      "minLength": 26,
      "maxLength": 36,
      "description": "Identificador único del evento (EVT-timestamp-hash o UUID)"
    },
    "user_id": {
      "type": "string",
      "pattern": "^CUST-[0-9]+$",
      "description": "Identificador único del usuario con formato CUST-XXXXXX"
    },
    "session_id": {
      "type": ["string", "null"],
      "pattern": "^(SES-[0-9]{13}-[A-F0-9]{6}|[A-Fa-f0-9]{8}-[A-Fa-f0-9]{4}-[A-Fa-f0-9]{4}-[A-Fa-f0-9]{4}-[A-Fa-f0-9]{12}|)$",
      "description": "Identificador de sesión opcional (SES-timestamp-hash o UUID)"
    },
    "event_type": {
      "type": "string",
      "enum": [
        "PAGE_VIEW",
        "CLICK", 
        "PURCHASE",
        "SIGNUP",
        "LOGIN",
        "LOGOUT",
        "SEARCH",
        "ADD_TO_CART",
        "CHECKOUT",
        "PAYMENT",
        "ERROR",
        "CUSTOM",
        "DOWNLOAD",
        "SHARE"
      ],
      "description": "Tipo de evento del catálogo permitido"
    },
    "event_timestamp": {
      "type": ["string", "null"],
      "description": "Timestamp del evento en formato ISO 8601 UTC"
    },
    "device_info": {
      "type": ["string", "null"],
      "maxLength": 1000,
      "default": "{}",
      "description": "Información del dispositivo en formato JSON"
    },
    "location_data": {
      "type": ["string", "null"],
      "maxLength": 500,
      "default": "{}",
      "description": "Datos de ubicación en formato JSON"
    },
    "custom_properties": {
      "type": ["string", "null"],
      "maxLength": 2000,
      "default": "{}",
      "description": "Propiedades personalizadas del evento en formato JSON"
    },
    "_corrupt_record": {
      "type": ["string", "null"],
      "description": "Campo para capturar registros JSON corruptos durante el parsing"
    }
  }
}