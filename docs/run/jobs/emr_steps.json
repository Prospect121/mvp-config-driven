{
  "Name": "prodi-layered-emr",
  "Steps": [
    {
      "Name": "raw",
      "ActionOnFailure": "CANCEL_AND_WAIT",
      "HadoopJarStep": {
        "Jar": "command-runner.jar",
        "Args": [
          "spark-submit",
          "--deploy-mode", "cluster",
          "--py-files", "s3://datalake-artifacts/prodi/mvp_config_driven-0.2.0-py3-none-any.whl",
          "s3://datalake-artifacts/scripts/prodi_emr_entry.py",
          "--layer", "raw",
          "--config", "s3://datalake-artifacts/cfg/raw/aws.prod.yml"
        ]
      }
    },
    {
      "Name": "bronze",
      "ActionOnFailure": "CANCEL_AND_WAIT",
      "HadoopJarStep": {
        "Jar": "command-runner.jar",
        "Args": [
          "spark-submit",
          "--deploy-mode", "cluster",
          "--py-files", "s3://datalake-artifacts/prodi/mvp_config_driven-0.2.0-py3-none-any.whl",
          "s3://datalake-artifacts/scripts/prodi_emr_entry.py",
          "--layer", "bronze",
          "--config", "s3://datalake-artifacts/cfg/bronze/aws.prod.yml"
        ]
      }
    },
    {
      "Name": "silver",
      "ActionOnFailure": "CANCEL_AND_WAIT",
      "HadoopJarStep": {
        "Jar": "command-runner.jar",
        "Args": [
          "spark-submit",
          "--deploy-mode", "cluster",
          "--py-files", "s3://datalake-artifacts/prodi/mvp_config_driven-0.2.0-py3-none-any.whl",
          "s3://datalake-artifacts/scripts/prodi_emr_entry.py",
          "--layer", "silver",
          "--config", "s3://datalake-artifacts/cfg/silver/aws.prod.yml"
        ]
      }
    },
    {
      "Name": "gold",
      "ActionOnFailure": "CANCEL_AND_WAIT",
      "HadoopJarStep": {
        "Jar": "command-runner.jar",
        "Args": [
          "spark-submit",
          "--deploy-mode", "cluster",
          "--py-files", "s3://datalake-artifacts/prodi/mvp_config_driven-0.2.0-py3-none-any.whl",
          "s3://datalake-artifacts/scripts/prodi_emr_entry.py",
          "--layer", "gold",
          "--config", "s3://datalake-artifacts/cfg/gold/aws.prod.yml"
        ]
      }
    }
  ]
}
